{"version":3,"sources":["hl.cookie.js","pop-miniable.js","zengxian-fixed.js"],"names":["HL","Cookie","Get","name","temp","cv","document","cookie","split","cva","i","length","unescape","Set","value","expires","path","domain","secure","test","today","Date","getTime","toGMTString","undefined","escape","Del","this","window","$","feedTempData","data","replace","keyword","substr","extend","base","more","result","prop","PopMiniable","opt","noop","defaultOpts","baseTemp","mainTemp","subTemp","closeFn","closeTxt","okFn","okTxt","classFix","opts","$instent","prototype","open","mainHtml","subHtml","baseHtml","fadeOut","remove","append","fadeIn","setTimeout","width","miniSizeWindow","html","onAnimationEnd","removeClass","hide","animationTimout","clearTimeout","addClass","one","close","ok","module","exports","jQuery","Storage","_global","getdate","now","y","getFullYear","m","getMonth","d","getDate","userid","tool","openTime","storageFixed","init","self","storageKey","save","checkOpen","cb","optmore","minisrc","console","log","goTozengxianData","mini","ready","appBridge","checkAppFeature","onSharingDone","sharingResult","global"],"mappings":"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","file":"js/zengxian-fixed.min.js","sourcesContent":["/*\n名称：Cookie函数\n版本：1.0.1 (Beta)\n作者：洪磊\nE-mail：[email]honglei@live.com[/email]\n*/\nvar HL = HL || {};\nHL.Cookie = {\n\t/*\n\t函数名称：HL.Cookie.Get([string name])\n\t函数功能：得到Cookie\n\t参数：name 可选项，要取得的Cookie名称\n\t说明：name为空时将通过数组形式返回全部Cookie，name不为空时返回此Cookie名称的值，没有任何值时返回undefined\n\t*/\n\tGet: function(name) {\n\t\tvar cv = document.cookie.split(\"; \"); //使用\"; \"分割Cookie\n\t\tvar cva = [],\n\t\t\ttemp;\n\t\t/*循环的得到Cookie名称与值*/\n\t\tfor (i = 0; i < cv.length; i++) {\n\t\t\ttemp = cv[i].split(\"=\"); //用\"=\"分割Cookie的名称与值\n\t\t\tcva[temp[0]] = unescape(temp[1]);\n\t\t}\n\t\tif (name) return cva[name]; //如果有name则输出这个name的Cookie值\n\t\telse return cva; //如果没有name则输出以名称为key，值为Value的数组\n\t},\n\t/*\n\t函数名称：HL.Cookie.Set(string name, string  value[, int expires[, string path[, string domain[, string secure]]]])\n\t函数功能：存入Cookie\n\t参数：name 必要项，要存入的Cookie名称\n\t      value 必要项，要存入的Cookie名称对应的值\n\t      expires 可选项，Cookie的过期时间，可以填入以秒为单位的保存时间，也可以填入日期格式（wdy, DD-Mon-YYYY HH:MM:SS GMT）的到期时间\n\t      path 可选项，Cookie在服务器端的有效路径\n\t      domain 可选项，该Cookie的有效域名\n\t      secure 可选项， 指明Cookie 是否仅通过安全的 HTTPS 连接传送，0或false或空时为假\n\t说明：保存成功则返回true，保存失败返回false\n\t*/\n\tSet: function(name, value, expires, path, domain, secure) {\n\t\tif (!name || !value) return false; //如果没有name和value则返回false\n\t\tif (name == \"\" || value == \"\") return false; //如果name和value为空则返回false\n\t\t/*对于过期时间的处理*/\n\t\tif (expires) {\n\t\t\t/*如果是数字则换算成GMT时间，当前时间加上以秒为单位的expires*/\n\t\t\tif (/^[0-9]+$/.test(expires)) {\n\t\t\t\tvar today = new Date();\n\t\t\t\texpires = new Date(today.getTime() + expires * 1000).toGMTString();\n\t\t\t\t/*判断expires格式是否正确，不正确则赋值为undefined*/\n\t\t\t} else if (!/^wed, \\d{2} \\w{3} \\d{4} \\d{2}\\:\\d{2}\\:\\d{2} GMT$/.test(expires)) {\n\t\t\t\texpires = undefined;\n\t\t\t}\n\t\t}\n\t\t/*合并cookie的相关值*/\n\t\tvar cv = name + \"=\" + escape(value) + \";\" + ((expires) ? \" expires=\" + expires + \";\" : \"\") + ((path) ? \"path=\" + path + \";\" : \"\") + ((domain) ? \"domain=\" + domain + \";\" : \"\") + ((secure && secure != 0) ? \"secure\" : \"\");\n\t\t/*判断Cookie总长度是否大于4K*/\n\t\tif (cv.length < 4096) {\n\t\t\tdocument.cookie = cv; //写入cookie\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t/*\n\t函数名称：HL.Cookie.Del(string name[, string path[, string domain]])\n\t函数功能：删除Cookie\n\t参数：name 必要项，要删除的Cookie名称\n\t      path 可选项，要删除的Cookie在服务器端的有效路径\n\t      domain 可选项，要删除的Cookie的有效域名\n\t说明：删除成功返回true，删除失败返回false\n\t*/\n\tDel: function(name, path, domain) {\n\t\tif (!name) return false; //如果没有name则返回false\n\t\tif (name == \"\") return false; //如果name为空则返回false\n\t\tif (!this.Get(name)) return false; //如果要删除的name值不存在则返回false\n\t\t/*合并Cookie的相关值*/\n\t\tdocument.cookie = name + \"=;\" + ((path) ? \"path=\" + path + \";\" : \"\") + ((domain) ? \"domain=\" + domain + \";\" : \"\") + \"expires=Thu, 01-Jan-1970 00:00:01 GMT;\";\n\t\treturn true;\n\t}\n}\nwindow[\"HL\"] = HL;","// require jQuery\n// mail 405606225@qq.com\n// Date 2016-01-12\n(function($, window) {\n\tvar extend = function(base, more) {\n\t\t// 浅复制拓展。\n\t\tvar result = {};\n\t\tfor (var prop in base) {\n\t\t\tresult[prop] = base[prop];\n\t\t}\n\t\tfor (var prop in more) {\n\t\t\tresult[prop] = more[prop];\n\t\t}\n\t\treturn result;\n\t};\n\tvar PopMiniable = function(opt) {\n\t\tvar noop = function() {};\n\t\tdefaultOpts = {\n\t\t\tbaseTemp: '<div class=\"pop-miniable-wraper\" id=\"pop-miniable-wraper\" >\\\n\t\t\t\t<div class=\"mini-mask\">\\\n\t\t\t\t</div>\\\n\t\t\t\t<div id=\"pop-miniable-main\" class=\"pop-miniable-main\">\\\n\t\t\t\t\t{{mainHtml}}\\\n\t\t\t\t</div>\\\n\t\t\t\t<div id=\"pop-miniable-sub\" class=\"pop-miniable-sub\">\\\n\t\t\t\t\t{{subHtml}}\\\n\t\t\t\t</div>\\\n\t\t\t</div>',\n\t\t\tmainTemp: '<a href=\"{{linkhref}}\">\\\n\t\t\t\t<img src=\"{{picsrc}}\" class=\"pop-miniable-pic\" />\\\n\t\t\t</a>\\\n\t\t\t<div class=\"pop-miniable-info\">\\\n\t\t\t\t<div class=\"pop-miniable-title\">\\\n\t\t\t\t\t{{title}}\\\n\t\t\t\t</div>\\\n\t\t\t\t<div class=\"pop-miniable-desc\">\\\n\t\t\t\t\t{{desc}}\\\n\t\t\t\t</div>\\\n\t\t\t\t<a href=\"javascript:;\" class=\"pop-miniable-btn close\" onclick=\"PopMiniable.close();\">{{closeTxt}}</a>\\\n\t\t\t\t<a href=\"javascript:;\" class=\"pop-miniable-btn ok\" onclick=\"PopMiniable.ok();\">{{okTxt}}</a>\\\n\t\t\t</div>',\n\t\t\tsubTemp: '<img src=\"{{minisrc}}\" class=\"songzengxian\" onclick=\"PopMiniable.open();\" />',\n\t\t\tcloseFn: noop,\n\t\t\tcloseTxt: \"取消\",\n\t\t\tokFn: noop,\n\t\t\tokTxt: \"好的\",\n\t\t\tclassFix: \"\"\n\t\t};\n\t\tvar opts = extend(defaultOpts, opt);\n\t\tthis.opts = opts;\n\t\tPopMiniable.$instent = this;\n\t};\n\n\tfunction feedTempData(temp, data) {\n\t\treturn temp.replace(/{{\\w+}}/g, function(keyword) {\n\t\t\tvar value = data[keyword.substr(2, keyword.length - 4)];\n\t\t\treturn typeof(value) == \"undefined\" ? keyword : value;\n\t\t})\n\t}\n\tPopMiniable.prototype.open = function() {\n\t\tvar baseTemp = this.opts.baseTemp;\n\t\tvar mainTemp = this.opts.mainTemp;\n\t\tvar subTemp = this.opts.subTemp;\n\t\tvar mainHtml = feedTempData(mainTemp, this.opts);\n\t\tvar subHtml = feedTempData(subTemp, this.opts);\n\t\tthis.opts.mainHtml = mainHtml;\n\t\tthis.opts.subHtml = subHtml;\n\t\tvar baseHtml = feedTempData(baseTemp, this.opts);\n\t\tif ($(\"#pop-miniable-sub\").length) {\n\t\t\t$(\"#pop-miniable-sub\").fadeOut(100, function() {\n\t\t\t\t$(\"#pop-miniable-wraper\").remove();\n\t\t\t\t$(\"body\").append(baseHtml);\n\t\t\t\t$(\"#pop-miniable-main,.mini-mask\").fadeIn(250);\n\t\t\t});\n\t\t} else {\n\t\t\t$(\"body\").append(baseHtml);\n\t\t\t$(\"#pop-miniable-main,.mini-mask\").fadeIn();\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(\"#pop-miniable-main\").width($(window).width() - 48);\n\t\t\t}, 100);\n\t\t}\n\t};\n\tvar miniSizeWindow = function() {\n\t\t$(\".pop-miniable-main\").html();\n\t\t$(\".pop-miniable-main\").html(\"\");\n\t\tvar onAnimationEnd = function() {\n\t\t\t$(\".pop-miniable-main\").removeClass('animated move-pop-miniable');\n\t\t\t$(\".pop-miniable-main,.mini-mask\").hide();\n\t\t\t$(\".pop-miniable-sub\").fadeIn(250);\n\t\t\tif (animationTimout) {\n\t\t\t\tclearTimeout(animationTimout);\n\t\t\t\tanimationTimout = null;\n\t\t\t}\n\t\t};\n\t\tanimationTimout = setTimeout(function() {\n\t\t\tonAnimationEnd();\n\t\t}, 350);\n\t\t$(\".pop-miniable-main\").addClass('animated move-pop-miniable').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n\t\t\tonAnimationEnd();\n\t\t});\n\t};\n\tPopMiniable.prototype.close = function() {\n\t\tminiSizeWindow();\n\t\tthis.opts.closeFn();\n\t};\n\tPopMiniable.prototype.ok = function() {\n\t\tminiSizeWindow();\n\t\tthis.opts.okFn();\n\t};\n\tPopMiniable.open = function() {\n\t\tthis.$instent.open();\n\t};\n\tPopMiniable.close = function() {\n\t\tthis.$instent.close();\n\t};\n\tPopMiniable.ok = function() {\n\t\tthis.$instent.ok();\n\t};\n\tPopMiniable.extend = extend;\n\tvar module = window[\"module\"];\n\tif (typeof module === \"object\" && typeof module.exports === \"object\") {\n\t\t// For CommonJS and CommonJS-like environments where a proper window is present\n\t\tmodule.exports = PopMiniable;\n\t} else {\n\t\twindow[\"PopMiniable\"] = PopMiniable;\n\t}\n})(jQuery, window);","//d = function(info) {\n//\tinfo = JSON.stringify(info, null, 4)\n//\t$(\"#debug-info\").append(info);\n//};\n$(function() {\n\t(function(Storage, _global) {\n\t\t_global = _global || {\n\t\t\tuserid: 0\n\t\t};\n\n\t\tfunction getdate() {\n\t\t\tvar now = new Date()\n\t\t\ty = now.getFullYear()\n\t\t\tm = now.getMonth() + 1\n\t\t\td = now.getDate()\n\t\t\tm = m < 10 ? \"0\" + m : m\n\t\t\td = d < 10 ? \"0\" + d : d\n\t\t\treturn y + \"-\" + m + \"-\" + d\n\t\t}\n\t\tvar tool = {\n\t\t\topenTime: null,\n\t\t\tstorageFixed: \"popMinTime_\",\n\t\t\tinit: function() {\n\t\t\t\tself = this;\n\t\t\t\tvar today = getdate();\n\t\t\t\tself.storageKey = self.storageFixed + today + \"_\" + _global.userid;\n\t\t\t\tself.openTime = Storage.Get(self.storageKey) || 0;\n\t\t\t},\n\t\t\tsave: function() {\n\t\t\t\tself = this;\n\t\t\t\t//\t\t\t\tconsole.log(\"self.storageKey\", self.storageKey);\n\t\t\t\t//\t\t\t\tconsole.log(\"self.openTime\",self.openTime);\n\t\t\t\tStorage.Set(self.storageKey, self.openTime, 60 * 60 * 24 * 2);\n\t\t\t},\n\t\t\tcheckOpen: function(cb) {\n\t\t\t\tself = this;\n\t\t\t\t//\t\t\t\tconsole.log(\"self.openTime\", self.openTime);\n\t\t\t\tif (self.openTime < 3) {\n\t\t\t\t\tself.openTime++;\n\t\t\t\t\tcb();\n\t\t\t\t\tself.save();\n\t\t\t\t} else {\n\t\t\t\t\t//\t\t\t\t\tconsole.log(\"dFis\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar optmore = {\n\t\t\tcloseTxt: \"放弃订单\",\n\t\t\tokTxt: \"马上赠送\",\n\t\t\tminisrc: \"img/fu-pakage.png\",\n\t\t\tokFn: function() {\n\t\t\t\tconsole.log(\"okFn\");\n\t\t\t},\n\t\t\tcloseFn: function() {\n\t\t\t\tconsole.log(\"closeFn\");\n\t\t\t}\n\t\t};\n\t\tif (window.goTozengxianData) {\n\t\t\toptmore = PopMiniable.extend(optmore, window.goTozengxianData);\n\t\t\tmini = new PopMiniable(optmore);\n\t\t\ttool.init();\n\t\t\t$(document).ready(function() {\n\t\t\t\t//\t\t\td(JSON.stringify(appBridge, null, 4));\n\t\t\t\t//\t\t\td(appBridge && appBridge.checkAppFeature('SHARING_AWARE'));\n\t\t\t\tif (appBridge && appBridge.checkAppFeature('SHARING_AWARE')) {\n\t\t\t\t\t//\t\t\t\td(\"before on\");\n\t\t\t\t\tappBridge.onSharingDone(function(sharingResult) {\n\t\t\t\t\t\t//\t\t\t\t\td(\"in on\")\n\t\t\t\t\t\t//\t\t\t\t\td(sharingResult);\n\t\t\t\t\t\ttool.checkOpen(function() {\n\t\t\t\t\t\t\tmini.open();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//\t\t\t\t\td(\"out on\")\n\t\t\t\t\t});\n\t\t\t\t\t//\t\t\t\td(\"after on\");\n\t\t\t\t} else {\n\t\t\t\t\t//\t\t\t\tvar info = \"Need appBridge, and SHARING_AWARE, local testing !\";\n\t\t\t\t\t//\t\t\t\tconsole.log(info);\n\t\t\t\t\t//\t\t\t\td(info);\n\t\t\t\t\t//\t\t\t\tmini.open();\n\t\t\t\t\t//\t\t\t\t\ttool.checkOpen(function() {\n\t\t\t\t\t//\t\t\t\t\t\tmini.open();\n\t\t\t\t\t//\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})(HL.Cookie, window.global);\n});\n//if (location.hostname != \"192.168.4.54\") {\n//\tlocation.href = \"http://192.168.4.54:3088/pop-miniable/src/test-pop-miniable.html\";\n//}"],"sourceRoot":"/source/"}